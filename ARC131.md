# Using the Google Cloud Speech API: Challenge Lab

---

### Task 1. Create an API key

#### 1. For this task, you need to create an API key to use in this and other tasks when sending a request to the Speech-to-Text API.

#### 2. Save the API key to use in other tasks.

---

### Task 2. Transcribe speech to English text

#### Note: This lab uses a pre-recorded file that's available on Cloud Storage: gs://spls/arc131/question_en.wav. You can listen to this file.

#### 1. For this task, connect to the instance lab-vm provisioned for you via SSH.

```bash
export API_KEY=<API_KEY>
```

#### 2. Create a file named <SPEECH_ENGLISH_REQUEST_FILE> as your API request to transcribe the audio file available at the gs://spls/arc131/question_en.wav location to English.

```bash
export SPEECH_ENGLISH_REQUEST_FILE=<SPEECH_ENGLISH_REQUEST_FILE>
```

```bash
cat > $SPEECH_ENGLISH_REQUEST_FILE <<EOF
{
  "config": {
    "encoding": "LINEAR16",
    "languageCode": "en-US",
    "audioChannelCount": 2
  },
  "audio": {
    "uri": "gs://spls/arc131/question_en.wav"
  }
}
EOF
```

#### 3. Call <SPEECH_ENGLISH_REQUEST_FILE> and store the result in a file named <SPEECH_ENGLISH_RESPONSE_FILE>.

```bash
export SPEECH_ENGLISH_RESPONSE_FILE=<SPEECH_ENGLISH_RESPONSE_FILE>
```

```bash
curl -s -X POST -H "Content-Type: application/json" --data-binary @$SPEECH_ENGLISH_REQUEST_FILE \
  "https://speech.googleapis.com/v1/speech:recognize?key=${API_KEY}" > $SPEECH_ENGLISH_RESPONSE_FILE
```

---

### Task 3. Transcribe speech to Spanish text

#### Note: This lab uses a pre-recorded file that's available on Cloud Storage: gs://spls/arc131/multi_es.flac. You can listen to this file.

#### 1. For this task, connect to the instance lab-vm provisioned for you via SSH.

#### 2. Create a file named <SPEECH_SPANISH_REQUEST_FILE> as your API request to transcribe the audio file available at the gs://spls/arc131/multi_es.flac location to Spanish.

```bash
export SPEECH_SPANISH_REQUEST_FILE=<SPEECH_SPANISH_REQUEST_FILE>
```

```bash
cat > $SPEECH_SPANISH_REQUEST_FILE <<EOF
{
  "config": {
    "encoding": "FLAC",
    "languageCode": "es-ES"
  },
  "audio": {
    "uri": "gs://spls/arc131/multi_es.flac"
  }
}
EOF
```

#### 3. Call <SPEECH_SPANISH_REQUEST_FILE> and store the result in the file named <SPEECH_SPANISH_RESPONSE_FILE>.

```bash
export SPEECH_SPANISH_RESPONSE_FILE=<SPEECH_SPANISH_RESPONSE_FILE>
```

```bash
curl -s -X POST -H "Content-Type: application/json" --data-binary @$SPEECH_SPANISH_REQUEST_FILE \
  "https://speech.googleapis.com/v1/speech:recognize?key=${API_KEY}" > $SPEECH_SPANISH_RESPONSE_FILE
```
